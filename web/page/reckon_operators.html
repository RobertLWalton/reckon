<html>
<head>
<!--
File:	reckon_operators.html
Author:	Robert L Walton <walton@acm.org>
Date:	Mon Nov 25 00:40:23 EST 2024

The authors have placed RECKON (its files and the
content of these files) in the public domain; they
make no warranty and accept no liability for RECKON.
-->

<meta http-equiv="Cache-Control"
      content="no-cache, no-store, must-revalidate" />

<title>RECKON Operators</title>
<link href='page.css' rel='stylesheet'/>
<link rel='icon' href='data:;base64,='>

<script src='page.script'></script>

</head>

<body>


<div id='header'>
<form method='GET' action='index.html#reckon_operators'>
<button type='submit'>INDEX</button></form>

<button type='button' onclick='NEW_WINDOW("index.html")'>
NEW WINDOW</button>
</div>

<div id='text'>

<h1 id='text-header'>RECKON Operators</h1>

<p>
</p>

<h2 id='line-operators'>Line Operators</h2>

<p>
Line operators can only occur outside parentheses and brackets.

<table class='top borders'>
<tr><th>Operator</th><th>Meaning</th><th>Fixity</th><th>Format</th>
                     <th>Precedence</th></tr>
<tr><th>if</th><td>control</td><td>prefix</td><td>control</td>
                     <td>0000</td><tr>
<tr><th>else if</th><td>control</td><td>prefix</td><td>control</td>
                     <td>0000</td><tr>
<tr><th>else</th><td>terminating<br>control</td><td>initial</td>
                 <td>terminating<br>control</td><td>0000</td><tr>
<tr><th>exit</th><td>exit</td><td>initial</td><td>exit</td><td>0000</td><tr>
<tr><th><code>:</code></th><td>control<br>completion</td><td>afix<br>right</td>
                           <td>(none)</td><td>0000</td><tr>
<tr><th>(subblock)</th><td>control or<br>declaration<br>completion</td>
                 <td>afix</td><td>(none)</td><td>0000</td><tr>
<tr><th>(subblock)</th><td>assignment or<br>loop</td>
                 <td>postfix</td><td>postfix</td><td>0000</td><tr>
<tr><th><code>=</code></th><td>assignment</td><td>left</td><td>assignment</td>
                           <td>1000</td><tr>
<tr><th><code>+ =</code></th><td>increment</td><td>infix</td><td>binary</td>
                             <td>1000</td><tr>
<tr><th><code>- =</code></th><td>decrement</td><td>infix</td><td>binary</td>
                             <td>1000</td><tr>
<tr><th><code>* =</code></th><td>multiply by</td><td>infix</td><td>binary</td>
                             <td>1000</td><tr>
<tr><th><code>/ =</code></th><td>divide by</td><td>infix</td><td>binary</td>
                             <td>1000</td><tr>
<tr><th><code>&lt;&lt; =</code></th><td>left shift by</td><td>infix</td>
                                    <td>binary</td><td>1000</td><tr>
<tr><th><code>&gt;&gt; =</code></th><td>right shift by</td><td>infix</td>
                                    <td>binary</td><td>1000</td><tr>
<tr><th>do</th><td>iterator</td><td>initial</td><td>(none)</td><td>3000</td><tr>
<tr><th>while</th><td>iterator</td><td>right</td><td>(none)</td>
                  <td>3000</td><tr>
<tr><th>until</th><td>iterator</td><td>right</td><td>(none)</td>
                  <td>3000</td><tr>
<tr><th>exactly</th><td>iterator</td><td>afix<br>right</td><td>(none)</td>
                    <td>3000</td><tr>
<tr><th>at most</th><td>iterator</td><td>afix<br>right</td><td>(none)</td>
                     <td>3000</td><tr>
<tr><th>times</th><td>iterator<br>modifier</td><td>afix<br>left</td>
                  <td>(none)</td><td>3000</td><tr>
</table>

</p>

<h2 id='non-line-operators' class='pagebreak'>Non-Line Operators</h2>

<p>
Non-line operators can occur either inside or outside parentheses and brackets.

<table class='top borders'>
<tr><th>Operator</th><th>Meaning</th><th>Fixity</th><th>Format</th>
                     <th>Precedence</th></tr>
<tr><th><code>,</code></th><td>separator</td><td>nofix</td>
                           <td>separator</td><td>2000</td><tr>
<tr><th>IF</th><td>selector</td><td>infix</td>
                  <td>selector</td><td>10000</td><tr>
<tr><th>ELSE</th><td>selector</td><td>afix<br>infix</td>
                  <td>(none)</td><td>10000</td><tr>
<tr><th>BUT NOT</th><td>logical<br>and not</td><td>infix</td>
                  <td>binary</td><td>11000</td><tr>
<tr><th>AND</th><td>logical<br>and</td><td>infix</td>
                  <td>infix<sup>1</sup></td><td>11100</td><tr>
<tr><th>OR</th><td>logical<br>or</td><td>infix</td>
                  <td>infix<sup>2</sup></td><td>11100</td><tr>
<tr><th>NOT</th><td>logical<br>not</td><td>prefix</td>
                  <td>unary prefix</td><td>11200</td><tr>
<tr><th><code>==</code></th><td>is equal</td><td>infix</td>
                  <td>infix<sup>3</sup></td><td>12000</td><tr>
<tr><th><code>!=</code></th><td>is not equal</td><td>infix</td>
                  <td>infix<sup>3</sup></td><td>12000</td><tr>
<tr><th><code>&lt;</code></th><td>is less than</td><td>infix</td>
                  <td>infix<sup>3</sup></td><td>12000</td><tr>
<tr><th><code>&lt;=</code></th><td>is less than<br>or equal</td><td>infix</td>
                  <td>infix<sup>3</sup></td><td>12000</td><tr>
<tr><th><code>&gt;</code></th><td>is greater than</td><td>infix</td>
                  <td>infix<sup>3</sup></td><td>12000</td><tr>
<tr><th><code>&gt;=</code></th><td>is greater than<br>or equal</td><td>infix</td>
                  <td>infix<sup>3</sup></td><td>12000</td><tr>
<tr><th>is integer</th><td>is integer</td><td>posfix</td>
                  <td>unary posfix</td><td>12000</td><tr>
<tr><th>is finite</th><td>is finite</td><td>posfix</td>
                  <td>unary posfix</td><td>12000</td><tr>
<tr><th>is infinite</th><td>is infinite</td><td>posfix</td>
                  <td>unary posfix</td><td>12000</td><tr>
<tr><th>is nan</th><td>is nan</td><td>posfix</td>
                  <td>unary posfix</td><td>12000</td><tr>
<tr><th>is number</th><td>is number</td><td>posfix</td>
                  <td>unary posfix</td><td>12000</td><tr>
<tr><th>is string</th><td>is string</td><td>posfix</td>
                  <td>unary posfix</td><td>12000</td><tr>
<tr><th>is object</th><td>is object</td><td>posfix</td>
                  <td>unary posfix</td><td>12000</td><tr>
<tr><th><code>+</code></th><td>addition</td><td>infix</td>
                  <td>infix<sup>4</sup></td><td>13000</td><tr>
<tr><th><code>-</code></th><td>subtraction</td><td>infix</td>
                  <td>infix<sup>4</sup></td><td>13000</td><tr>
<tr><th><code>/</code></th><td>division</td><td>infix</td>
                  <td>binary</td><td>13100</td><tr>
<tr><th><code>*</code></th><td>multiplication</td><td>infix</td>
                  <td>infix<sup>5</sup></td><td>13200</td><tr>
<tr><th><code>^</code></th><td>exponentiation</td><td>infix</td>
                  <td>binary</td><td>13300</td><tr>
<tr><th><code>&lt;&lt;</code></th><td>left shift</td><td>infix</td>
                  <td>binary</td><td>13300</td><tr>
<tr><th><code>&gt;&gt;</code></th><td>right shift</td><td>infix</td>
                  <td>binary</td><td>13300</td><tr>
<tr><th><code>+</code></th><td>no operation</td><td>prefix</td>
<tr><th><code>+</code></th><td>no operation</td><td>prefix</td>
                  <td>unary prefix</td><td>H-1</td><tr>
<tr><th><code>-</code></th><td>negation</td><td>prefix</td>
                  <td>unary prefix</td><td>H-1</td><tr>
<tr><th><code>#</code></th><td>length</td><td>prefix</td>
                  <td>unary prefix</td><td>H-1</td><tr>
</table>

<p>
<ul class='notes'>
<li> <sup>1</sup>The only operator allowed is <code>AND</code>.
<li> <sup>2</sup>The only operator allowed is <code>OR</code>.
<li> <sup>3</sup>The only operators allowed are
<code>==</code>, <code>!=</code>, <code>&lt;</code>, <code>&lt;=</code>,
<code>&gt;</code>, and <code>&gt;=</code>.
<li> <sup>4</sup>The only operators allowed are
<code>+</code> and <code>-</code>.
<li> <sup>5</sup>The only operator allowed is <code>*</code>.
</ul>

</p>

<h2 id='precedence'>Precedence</h2>

<p>
A <em>P-operator</em> is an operator of precedence <em>P</em>.
For example, <code>=</code> is a 1000-operator and
<code>while</code> is a 3000-operator.
<p>
A <em>P-expression</em> is an expression not containing any
operators of precedence greater than <em>P</em> outside
parentheses and brackets.  For example,
<code>x + y * z</code> is a 13000-expression and
<code>y * z</code> is a 13100-expression.
A <em>P-expression</em>
need not contain a <em>P-operator</em>, so
both these
expressions are also 12000-expressions.
<p>
A <em>P-expression</em> that does contain a <em>P-operator</em>
consists of a sequence of <em>P-operators</em> and
<em>(P+1)-expressions</em>.  The <em>(P+1)-expressions</em> serve
as operands to the <em>P-operators</em>.  Thus
<code>x + y * z</code> is a 13000-expression with 13000-operator
<code>+</code> and operands that are the 13001-expressions 
<code>x</code> and <code>y * z</code>.  Two operands CANNOT appear
next to each other but two <em>P-operators</em> can appear next to each other
(as in <code>x, y,, z</code> where <code>,</code> is a 2000-operator).
<p>
In a <em>P-expression</em>, operands are evaluated BEFORE the
<em>P-expression</em> is evaluated.  Thus in <code>x + y * z</code>,
the operand <code>y * z</code> is evaluated before the <code>+</code> operator
is used to evaluate the entire expression.  However, not all operators
are evaluatable: the comma operator <code>,</code> is not -- it is used
to group sub-expressions, and the line operators
(see <a href='#line-operators'>Line Operators</a>) are not evaluatable
in the sense that <code>+</code> is.
<p>
Operator precedences are in the range <em>L</em> = -1,000,000 through
<em>H</em> = +1,000,000.  By convention, precedence <em>H</em> is
reserved for postfix operators and <em>H-1</em> is reserved for
prefix operators (see <a href='#fixity'>Fixity</a>), but not all
prefix or postfix operators have these precedences.  Thus
prefix <code>+</code> has precedence <em>H-1</em> but prefix <code>NOT</code>
has precedence 11200.  Precedence <em>L-1</em> is used by an
`error operator' inserted by the parser to fix up parsing errors.
An <em>(H+1)-expression</em> is just an expression (used as an operand)
that contains NO operators.


</p>

<h2 id='fixity'>Fixity</h2>

<p>
An operator can have any non-conflicting combination of the following
fixities:
</p>
<dl>
<dt>right</dt>
<dd>When a <em>P-operator</em> with this fixity appears in a
<em>P-expression</em>, it must be immediately followed by an operand
(its `right' operand).</dd>
<dt>left</dt>
<dd>When a <em>P-operator</em> with this fixity appears in a
<em>P-expression</em>, it must be immediately preceeded by an operand
(its `left' operand).</dd>
<dt>initial</dt>
<dd>When a <em>P-operator</em> with this fixity appears in a
<em>P-expression</em>, it must be at the very beginning of the
<em>P-expression</em>.</dd>
<dt>final</dt>
<dd>When a <em>P-operator</em> with this fixity appears in a
<em>P-expression</em>, it must be at the very end of the
<em>P-expression</em>.</dd>
<dt>afix</dt>
<dd>When a <em>P-operator</em> with this fixity appears in a
<em>P-expression</em>, there must be a second <em>P-operator</em>
to its left in the <em>P-expression</em>.</dd>
<dt>line</dt>
<dd>When a <em>P-operator</em> with this fixity appears in a
<em>P-expression</em>, the <em>P-expression</em> must NOT be
inside parentheses or brackets.  <em>P-operators</em> with
this fixity are called `<a href='#line-operators'>Line Operators</a>'.</dd>
</dl>

<p>
(There is not much conflict between fixities, but
<b>initial</b> and <b>left</b> do conflict, and similarly
<b>final</b> and <b>right</b>.)
<p>
In addition, the following are used as abbreviations of
combinations of fixities:
</p>
<dl>
<dt>nofix</dt>
<dd>The operator does not have any fixities other than <b>line</b>.
<dt>prefix</dt>
<dd>The operator has both the <b>initial</b> and <b>right</b> fixities.
<dt>postfix</dt>
<dd>The operator has both the <b>final</b> and <b>left</b> fixities.
<dt>infix</dt>
<dd>The operator has both the <b>left</b> and <b>right</b> fixities.
</dl>

</p>

<h2 id='format'>Format</h2>

<p>
The <em>format</em> of the first <em>P-operator</em> in a
<em>P-expression</em> that contains <em>P-operators</em> is the
format of the <em>P-expression</em>.  For example, the format
of <code>x + y - z</code> is the format of <code>+</code>
and this specifies that <code> x + y - z</code> consists of
alternating operands and operators, begins and ends with an operand,
and all the operators are <code>+</code> or <code>-</code>.
<p>
A subblock that ends a statement
(see <a href='reckon_logical_lines.html#blocks'>
RECKON Logical Lines - Blocks</a> ) can itself be an operator.
<p>
A format error is a parsing error.
Statements that have a parsing error are not compiled or executed.
<p>
The operator formats are:
</p>
<dl>
<dt>control</dt>
<dd>The <em>P-expression</em> consists of a precedence 0000 control operator
(i.e., <code>if</code> or <code>else if</code>) followed by
a condition operand followed by either a colon subblock operator
or by a single colon afix operator that is followed by a restricted statement
operand.  A restricted statement is a statement not containing
any operator of precedence 0000, and is thus suitable for use
as an operand to a precedence 0000 operator.
</dd>
<br>
<dt>terminating control</dt>
<dd>Ditto but the condition operand is omitted (the control operator
is <code>else</code>).
</dd>
<br>
<dt>assignment</dt>
<dd>The <em>P-expression</em> is either binary or unary posfix.
<br><br>
In the binary case the <em>P-expression</em>
consists of an operand (the locations to be assigned) followed
by an assignment operator (i.e., <code>=</code>) followed
by another operand (computing the values to be assigned to the
variables).
<br><br>
In the postfix case the second operand is omitted and
the <em>P-expression</em> itself must be the operand of a postfix
subblock operator that computes the values to be assigned.
</dd>
<br>
<dt>exit</dt>
<dd>The <em>P-expression</em> is either solitary or unary prefix.
<br><br>
In the solitary case the <em>P-expression</em>
consists of just the operator.  In the unary prefix case the
<em>P-expression</em> consists of an operator followed by a
single operand.
</dd>
<br>
<dt>separator</dt>
<dd>The <em>P-expression</em> is sequence of nofix separating operators
(e.g., <code>","</code>) and operands
constrained only in that all operators must be the same
(if one is <code>","</code> the others must be <code>","</code>).
Two operands must be separated by an operator, but operators may be
adjacent and at the beginning or end of the <em>P-expression</em>.
<br><br>
The <em>P-expression</em> is reformatted as follows.
First empty list operands (i.e., <code>{}</code>) are inserted
so that the <em>P-expression</em> is an alternating sequence of operators
and operands beginning and ending with an operand.  Then the operators
are removed and a <code>.separator</code> attribute equal to the operator
is added to the <em>P-expression</em>.
<br><br>
Examples with <code>","</code> as the operator:
<table class='center'>
<tr><th><em>P-expression</em></th><th>Is Reformated To</th><tr>
<tr><td><code>x, y</code></td><td><code>{| x y | .separator = "," |}</code>
    </td></tr>
<tr><td><code>, y</code></td><td><code>{| {} y | .separator = "," |}</code>
    </td></tr>
<tr><td><code>x,</code></td><td><code>{| x {} | .separator = "," |}</code>
    </td></tr>
<tr><td><code>x,, y</code></td><td><code>{| x {} y | .separator = "," |}</code>
    </td></tr>
</table>
</dd>
<br>
<dt>selector</dt>
<dd>The <em>P-expression</em> is an alternating sequence of operators
and operands beginning and ending with an operand.  The first operator
is <code>IF</code>, the second is <code>ELSE</code> (there must be at least
two operators and three operands), and thereafter these two operators
alternate.  There must be an even number of operators and an odd number
of operands.
</dd>
<br>
<dt>binary</dt>
<dd>The <em>P-expression</em> consists of an operand followed
by a binary operator (e.g., <code>+=</code> or <code>/</code> or <code>^</code>)
followed by an operand.
There are exactly two operands in the <em>P-expression</em>.
</dd>
<br>
<dt>infix</dt>
<dd>The <em>P-expression</em> is an alternating sequence of infix operators
and operands beginning and ending with an operand.  The operators
are constrained to be those in a list of operators associated with the
particular <em>infix</em> format.
<br><br>
For example: the infix format for the <code>+</code> and <code>-</code>
operators constrains the operators in the <em>P-expression</em> to be
either <code>+</code> or <code>-</code>.
</dd>
<br>
<dt>unary prefix</dt>
<dd>The <em>P-expression</em> consists of an operator followed by a
single operand.
</dd>
<br>
<dt>unary postfix</dt>
<dd>The <em>P-expression</em> consists of a single operand followed by
an operator.
</dd>
</dl>

</p>

</div>

</body>

</html>



